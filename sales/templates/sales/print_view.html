{% extends 'base.html' %}
{% load bs_filters %}
{% block content %}
<h2 class="mt-4 mb-3">Print Sales</h2>
<button class="btn btn-primary mb-3" onclick="window.print()">Print</button>

<div class="table-responsive">
  <table class="table table-bordered table-striped">
    <thead class="table-dark">
      <tr>
        <th>Bill No</th>
        <th>Sale Date</th>
        <th>Order No</th>
        <th>Order Date</th>
        <th>Customer</th>
        <th>Phone</th>
        <th>Status</th>
        <th>Amount</th>
        <th>Discount</th>
        <th>Subtotal</th>
        <th>Tax</th>
        <th>Total</th>
        <th>Paid</th>
        <th>Remaining</th>
      </tr>
    </thead>
    <tbody>
      {% for sale in sales %}
      {% with order=sale.order %}
      <tr>
        <td>{{ sale.bill_no }}</td>
        <td>{{ sale.sale_date|bs_date }}</td>
        <td>{{ order.sn }}</td>
        <td>{{ order.order_date|bs_date }}</td>
        <td>{{ order.customer_name }}</td>
        <td>{{ order.phone_number }}</td>
        <td>{{ order.get_status_display }}</td>
        <td>{{ order.amount }}</td>
        <td>{{ order.discount }}</td>
        <td>{{ order.subtotal }}</td>
        <td>{{ order.tax }}</td>
        <td>{{ order.total }}</td>
        <td>{{ order.payment_amount }} ({{ order.get_payment_mode_display }})</td>
        <td>{{ order.remaining_amount }}</td>
      </tr>
      {% endwith %}
      {% empty %}
      <tr><td colspan="14" class="text-center">No sales.</td></tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
