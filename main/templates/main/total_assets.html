{% extends 'base.html' %}
{% load static %}

{% block title %}Total Assets - Nirmala Jewellers{% endblock %}

{% block content %}
<div class="container-fluid py-4">
    <div class="row mb-4">
        <div class="col-md-12">
            <h2 class="mb-4">üìä Total Assets Overview</h2>
        </div>
    </div>

    <!-- Ornament Inventory Section -->
    <div class="row mb-4">
        <div class="col-md-6">
            <div class="card border-primary">
                <div class="card-header bg-primary text-white">
                    <h5 class="mb-0">üíç Ornament Inventory</h5>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-sm mb-0">
                            <tr>
                                <td><strong>Total Ornaments:</strong></td>
                                <td class="text-end">{{ ornament_count }}</td>
                            </tr>
                            <tr>
                                <td><strong>Gold Weight:</strong></td>
                                <td class="text-end">{{ total_gold_weight|floatformat:2 }} gm</td>
                            </tr>
                            <tr>
                                <td><strong>Silver Weight:</strong></td>
                                <td class="text-end">{{ total_silver_weight|floatformat:2 }} gm</td>
                            </tr>
                            <tr>
                                <td><strong>Diamond Weight:</strong></td>
                                <td class="text-end">{{ total_diamond_weight|floatformat:2 }} gm</td>
                            </tr>
                            <tr class="border-top">
                                <td><strong>Gold Value:</strong></td>
                                <td class="text-end"><strong>‚Çπ {{ ornaments_gold|floatformat:2 }}</strong></td>
                            </tr>
                            <tr>
                                <td><strong>Silver Value:</strong></td>
                                <td class="text-end"><strong>‚Çπ {{ ornaments_silver|floatformat:2 }}</strong></td>
                            </tr>
                            <tr>
                                <td><strong>Diamond Value:</strong></td>
                                <td class="text-end"><strong>‚Çπ {{ ornaments_diamond|floatformat:2 }}</strong></td>
                            </tr>
                            <tr class="table-primary">
                                <td><strong>Subtotal:</strong></td>
                                <td class="text-end"><strong>‚Çπ {{ ornaments_total|floatformat:2 }}</strong></td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-md-6">
            <div class="card border-success">
                <div class="card-header bg-success text-white">
                    <h5 class="mb-0">ü™ô Raw Materials</h5>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-sm mb-0">
                            <thead class="table-light">
                                <tr>
                                    <th>Metal Type</th>
                                    <th class="text-center">Total Stock</th>
                                    <th class="text-center">Ordered</th>
                                    <th class="text-center">Final Available</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Gold Row -->
                                <tr>
                                    <td><strong>üî∂ Gold</strong></td>
                                    <td class="text-center">
                                        <small class="text-muted">{{ raw_gold_weight_total|floatformat:2 }} gm</small><br>
                                        <small>‚Çπ {{ raw_gold_total|floatformat:2 }}</small>
                                    </td>
                                    <td class="text-center">
                                        <small class="text-warning">{{ order_gold_weight_24k|floatformat:2 }} gm</small><br>
                                        <small>‚Çπ {{ order_gold_value|floatformat:2 }}</small>
                                    </td>
                                    <td class="text-center bg-light">
                                        <small><strong>{{ raw_gold_weight|floatformat:2 }} gm</strong></small><br>
                                        <small><strong>‚Çπ {{ raw_gold|floatformat:2 }}</strong></small>
                                    </td>
                                </tr>
                                <!-- Silver Row -->
                                <tr>
                                    <td><strong>‚ö™ Silver</strong></td>
                                    <td class="text-center">
                                        <small class="text-muted">{{ raw_silver_weight_total|floatformat:2 }} gm</small><br>
                                        <small>‚Çπ {{ raw_silver_total|floatformat:2 }}</small>
                                    </td>
                                    <td class="text-center">
                                        <small class="text-warning">{{ order_silver_weight_24k|floatformat:2 }} gm</small><br>
                                        <small>‚Çπ {{ order_silver_value|floatformat:2 }}</small>
                                    </td>
                                    <td class="text-center bg-light">
                                        <small><strong>{{ raw_silver_weight|floatformat:2 }} gm</strong></small><br>
                                        <small><strong>‚Çπ {{ raw_silver|floatformat:2 }}</strong></small>
                                    </td>
                                </tr>
                                <!-- Subtotal Row -->
                                <tr class="table-success fw-bold">
                                    <td>Subtotal:</td>
                                    <td class="text-center">‚Çπ {{ raw_gold_total|add:raw_silver_total|floatformat:2 }}</td>
                                    <td class="text-center">‚Çπ {{ order_gold_value|add:order_silver_value|floatformat:2 }}</td>
                                    <td class="text-center bg-light">‚Çπ {{ raw_gold|add:raw_silver|floatformat:2 }}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Other Inventory Section -->
    <div class="row mb-4">
        <div class="col-md-4">
            <div class="card border-info">
                <div class="card-header bg-info text-white">
                    <h5 class="mb-0">üíé Stones</h5>
                </div>
                <div class="card-body">
                    <div class="text-center py-3">
                        <h3 class="text-info">‚Çπ {{ stones_total|floatformat:2 }}</h3>
                        <small class="text-muted">Inventory Value</small>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-md-4">
            <div class="card border-warning">
                <div class="card-header bg-warning text-dark">
                    <h5 class="mb-0">üßø Motimala</h5>
                </div>
                <div class="card-body">
                    <div class="text-center py-3">
                        <h3 class="text-warning">‚Çπ {{ motimala_total|floatformat:2 }}</h3>
                        <small class="text-muted">Inventory Value</small>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-md-4">
            <div class="card border-danger">
                <div class="card-header bg-danger text-white">
                    <h5 class="mb-0">üìø Potey</h5>
                </div>
                <div class="card-body">
                    <div class="text-center py-3">
                        <h3 class="text-danger">‚Çπ {{ potey_total|floatformat:2 }}</h3>
                        <small class="text-muted">Inventory Value</small>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Receivables Section -->
    <div class="row mb-4">
        <div class="col-md-4">
            <div class="card border-secondary">
                <div class="card-header bg-secondary text-white">
                    <h5 class="mb-0">üìã Order Receivables</h5>
                </div>
                <div class="card-body">
                    <div class="text-center py-4">
                        <h3>‚Çπ {{ order_receivable|floatformat:2 }}</h3>
                        <small class="text-muted">Pending Orders</small>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-md-4">
            <div class="card border-warning">
                <div class="card-header bg-warning text-dark">
                    <h5 class="mb-0">üë• Sundry Debtors</h5>
                </div>
                <div class="card-body">
                    <div class="text-center py-4">
                        <h3 class="text-warning">‚Çπ {{ sundry_debtor_total|floatformat:2 }}</h3>
                        <small class="text-muted">Parties Owe</small>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-md-4">
            <div class="card border-secondary">
                <div class="card-header bg-secondary text-white">
                    <h5 class="mb-0">üìã Order Receivables</h5>
                </div>
                <div class="card-body">
                    <div class="text-center py-4">
                        <h3>‚Çπ {{ order_receivable|floatformat:2 }}</h3>
                        <small class="text-muted">Amount Customers Owe</small>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-md-4">
            <div class="card border-info">
                <div class="card-header bg-info text-white">
                    <h5 class="mb-0">üí∞ Cash & Bank</h5>
                </div>
                <div class="card-body">
                    <table class="table table-sm mb-0">
                        <tr>
                            <td>Cash in Hand:</td>
                            <td class="text-end">‚Çπ {{ total_cash|floatformat:2 }}</td>
                        </tr>
                        <tr>
                            <td>Bank Balances:</td>
                            <td class="text-end">‚Çπ {{ total_bank|floatformat:2 }}</td>
                        </tr>
                        <tr class="table-info">
                            <td><strong>Subtotal:</strong></td>
                            <td class="text-end"><strong>‚Çπ {{ cash_bank_total|floatformat:2 }}</strong></td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>

        <div class="col-md-4">
            <div class="card border-success border-2">
                <div class="card-header bg-success text-white">
                    <h5 class="mb-0">‚úÖ TOTAL ASSETS</h5>
                </div>
                <div class="card-body">
                    <div class="text-center py-4">
                        <h2 class="text-success">‚Çπ {{ total_assets|floatformat:2 }}</h2>
                        <small class="text-muted">Complete Asset Value</small>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Summary Breakdown -->
    <div class="row">
        <div class="col-md-12">
            <div class="card">
                <div class="card-header">
                    <h5 class="mb-0">üìà Asset Breakdown</h5>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-hover">
                            <thead class="table-light">
                                <tr>
                                    <th>Category</th>
                                    <th class="text-end">Amount (‚Çπ)</th>
                                    <th class="text-end">% of Total</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>üíç Ornament Inventory</td>
                                    <td class="text-end">{{ ornaments_total|floatformat:2 }}</td>
                                    <td class="text-end">
                                        {% widthratio ornaments_total total_assets 100 %}%
                                    </td>
                                </tr>
                                <tr>
                                    <td>ü™ô Raw Materials</td>
                                    <td class="text-end">{{ raw_gold|add:raw_silver|floatformat:2 }}</td>
                                    <td class="text-end">
                                        {% widthratio raw_gold|add:raw_silver total_assets 100 %}%
                                    </td>
                                </tr>
                                <tr>
                                    <td>üíé Stones</td>
                                    <td class="text-end">{{ stones_total|floatformat:2 }}</td>
                                    <td class="text-end">
                                        {% widthratio stones_total total_assets 100 %}%
                                    </td>
                                </tr>
                                <tr>
                                    <td>üßø Motimala</td>
                                    <td class="text-end">{{ motimala_total|floatformat:2 }}</td>
                                    <td class="text-end">
                                        {% widthratio motimala_total total_assets 100 %}%
                                    </td>
                                </tr>
                                <tr>
                                    <td>üìø Potey</td>
                                    <td class="text-end">{{ potey_total|floatformat:2 }}</td>
                                    <td class="text-end">
                                        {% widthratio potey_total total_assets 100 %}%
                                    </td>
                                </tr>
                                <tr>
                                    <td>üìã Order Receivables</td>
                                    <td class="text-end">{{ order_receivable|floatformat:2 }}</td>
                                    <td class="text-end">
                                        {% widthratio order_receivable total_assets 100 %}%
                                    </td>
                                </tr>
                                <tr>
                                    <td>üë• Sundry Debtors</td>
                                    <td class="text-end">{{ sundry_debtor_total|floatformat:2 }}</td>
                                    <td class="text-end">
                                        {% widthratio sundry_debtor_total total_assets 100 %}%
                                    </td>
                                </tr>
                                <tr>
                                    <td>üí∞ Cash & Bank</td>
                                    <td class="text-end">{{ cash_bank_total|floatformat:2 }}</td>
                                    <td class="text-end">
                                        {% widthratio cash_bank_total total_assets 100 %}%
                                    </td>
                                </tr>
                                <tr class="table-success border-top-2">
                                    <td><strong>TOTAL ASSETS</strong></td>
                                    <td class="text-end"><strong>‚Çπ {{ total_assets|floatformat:2 }}</strong></td>
                                    <td class="text-end"><strong>100%</strong></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer Info -->
    <div class="row mt-4">
        <div class="col-md-12">
            <div class="alert alert-info" role="alert">
                <strong>‚ÑπÔ∏è Note:</strong> This page shows your total physical assets including:
                <ul class="mb-0 mt-2">
                    <li>All ornaments in stock (converted to rupees at current rates)</li>
                    <li>Raw metals inventory</li>
                    <li>Stones, Motimala, and Potey at cost price</li>
                    <li>Pending order amounts that customers owe</li>
                    <li>Sundry debtors (parties that owe money)</li>
                    <li>Cash in hand and bank account balances</li>
                </ul>
            </div>
        </div>
    </div>
</div>
{% endblock %}
